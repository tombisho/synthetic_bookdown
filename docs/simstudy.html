<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Generating data using simstudy methods | dsSynthetic: A DataSHIELD package to generate synthetic data</title>
  <meta name="description" content="The purpose of this book is to help the reader use dsSynthetic to help with data harmonisation and analysis when working on federated data sets with DataSHIELD" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Generating data using simstudy methods | dsSynthetic: A DataSHIELD package to generate synthetic data" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The purpose of this book is to help the reader use dsSynthetic to help with data harmonisation and analysis when working on federated data sets with DataSHIELD" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Generating data using simstudy methods | dsSynthetic: A DataSHIELD package to generate synthetic data" />
  
  <meta name="twitter:description" content="The purpose of this book is to help the reader use dsSynthetic to help with data harmonisation and analysis when working on federated data sets with DataSHIELD" />
  

<meta name="author" content="Tom Bishop, Soumya Banerjee" />


<meta name="date" content="2021-12-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="harmonisation.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">dsSynthetic: Synthetic data generation with DataSHIELD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preliminaries</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#synopsis"><i class="fa fa-check"></i><b>1.1</b> Synopsis</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>1.2</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#assumptions"><i class="fa fa-check"></i><b>2.1</b> Assumptions</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#motivation"><i class="fa fa-check"></i><b>2.2</b> Motivation</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#hypothesis-for-using-synthetic-data"><i class="fa fa-check"></i><b>2.3</b> Hypothesis for using synthetic data</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#overview-of-steps"><i class="fa fa-check"></i><b>2.4</b> Overview of steps</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#working-with-single-studies"><i class="fa fa-check"></i><b>2.5</b> Working with single studies</a></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#prerequisites"><i class="fa fa-check"></i><b>2.6</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="synthpop.html"><a href="synthpop.html"><i class="fa fa-check"></i><b>3</b> Generating data using synthpop methods</a><ul>
<li class="chapter" data-level="3.1" data-path="synthpop.html"><a href="synthpop.html#getting-set-up"><i class="fa fa-check"></i><b>3.1</b> Getting set up</a></li>
<li class="chapter" data-level="3.2" data-path="synthpop.html"><a href="synthpop.html#generate-synthetic-data-with-synthpop"><i class="fa fa-check"></i><b>3.2</b> Generate synthetic data with synthpop</a></li>
<li class="chapter" data-level="3.3" data-path="synthpop.html"><a href="synthpop.html#brief-comments-on-the-validity-of-the-data"><i class="fa fa-check"></i><b>3.3</b> Brief comments on the validity of the data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>4</b> Analysis with synthetic data</a><ul>
<li class="chapter" data-level="4.1" data-path="analysis.html"><a href="analysis.html#getting-set-up-1"><i class="fa fa-check"></i><b>4.1</b> Getting set up</a></li>
<li class="chapter" data-level="4.2" data-path="analysis.html"><a href="analysis.html#create-synthetic-dataset"><i class="fa fa-check"></i><b>4.2</b> Create synthetic dataset</a></li>
<li class="chapter" data-level="4.3" data-path="analysis.html"><a href="analysis.html#start-dslite-local-instance"><i class="fa fa-check"></i><b>4.3</b> Start DSLite local instance</a></li>
<li class="chapter" data-level="4.4" data-path="analysis.html"><a href="analysis.html#write-some-analysis-code"><i class="fa fa-check"></i><b>4.4</b> Write some analysis code</a></li>
<li class="chapter" data-level="4.5" data-path="analysis.html"><a href="analysis.html#run-corrected-code-on-real-data"><i class="fa fa-check"></i><b>4.5</b> Run corrected code on real data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="harmonisation.html"><a href="harmonisation.html"><i class="fa fa-check"></i><b>5</b> Harmonisation with synthetic data</a><ul>
<li class="chapter" data-level="5.1" data-path="harmonisation.html"><a href="harmonisation.html#getting-set-up-2"><i class="fa fa-check"></i><b>5.1</b> Getting set up</a></li>
<li class="chapter" data-level="5.2" data-path="harmonisation.html"><a href="harmonisation.html#experiment-with-a-single-row"><i class="fa fa-check"></i><b>5.2</b> Experiment with a single row</a></li>
<li class="chapter" data-level="5.3" data-path="harmonisation.html"><a href="harmonisation.html#test-on-whole-dataset"><i class="fa fa-check"></i><b>5.3</b> Test on whole dataset</a></li>
<li class="chapter" data-level="5.4" data-path="harmonisation.html"><a href="harmonisation.html#run-the-code-on-the-real-data"><i class="fa fa-check"></i><b>5.4</b> Run the code on the real data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="simstudy.html"><a href="simstudy.html"><i class="fa fa-check"></i><b>6</b> Generating data using simstudy methods</a><ul>
<li class="chapter" data-level="6.1" data-path="simstudy.html"><a href="simstudy.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="simstudy.html"><a href="simstudy.html#getting-set-up-3"><i class="fa fa-check"></i><b>6.2</b> Getting set up</a></li>
<li class="chapter" data-level="6.3" data-path="simstudy.html"><a href="simstudy.html#preparing-to-generate-synthetic-data"><i class="fa fa-check"></i><b>6.3</b> Preparing to generate synthetic data</a></li>
<li class="chapter" data-level="6.4" data-path="simstudy.html"><a href="simstudy.html#generating-synthetic-data"><i class="fa fa-check"></i><b>6.4</b> Generating synthetic data</a></li>
<li class="chapter" data-level="6.5" data-path="simstudy.html"><a href="simstudy.html#brief-comments-on-the-validity-of-the-data-1"><i class="fa fa-check"></i><b>6.5</b> Brief comments on the validity of the data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">dsSynthetic: A DataSHIELD package to generate synthetic data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simstudy" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Generating data using simstudy methods</h1>
<p>In this chapter we will look at how to generate synthetic data on the client side using DataSHIELD functions to extract summary characteristics of the data set from the server side. These parameters are then used with the <strong>simstudy</strong> package to generate the synthetic data. This method requires more work to extract the parameters correctly, and the <strong>dsSyntheticClient</strong> package provides some helper functions. The advantage of working in this way is that it may be preferred by data custodians as only summary statistics leave the remote server. While using <strong>synthpop</strong> should not “leak” personal data when the synthetic data is generated on the server side, this still may be of concern to some data custodians.</p>
<div id="overview" class="section level2">
<h2><span class="header-section-number">6.1</span> Overview</h2>
<p>The steps for using the <strong>simstudy</strong> to generate a synthetic data set:</p>
<ol style="list-style-type: decimal">
<li>Connect to the server</li>
<li>Split factor variables in dummy (binary) variables</li>
<li>Prepare lists of continuous and factor variables</li>
<li>Generate synthetic data set</li>
<li>Recombine dummy variables.</li>
</ol>
</div>
<div id="getting-set-up-3" class="section level2">
<h2><span class="header-section-number">6.2</span> Getting set up</h2>
<p>Again we need to build a login object for the server that holds the data. Note that the <strong>dsSynthetic</strong> functions have been written to work with a single connection:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="simstudy.html#cb1-1"></a>builder &lt;-<span class="st"> </span>DSI<span class="op">::</span><span class="kw">newDSLoginBuilder</span>()</span>
<span id="cb1-2"><a href="simstudy.html#cb1-2"></a><span class="co"># hide credentials</span></span>
<span id="cb1-3"><a href="simstudy.html#cb1-3"></a>builder<span class="op">$</span><span class="kw">append</span>(<span class="dt">server=</span><span class="st">&quot;server1&quot;</span>, <span class="dt">url=</span><span class="st">&quot;https://opal-sandbox.mrc-epid.cam.ac.uk&quot;</span>,</span>
<span id="cb1-4"><a href="simstudy.html#cb1-4"></a>               <span class="dt">user=</span><span class="st">&quot;dsuser&quot;</span>, <span class="dt">password=</span><span class="st">&quot;P@ssw0rd&quot;</span>, </span>
<span id="cb1-5"><a href="simstudy.html#cb1-5"></a>               <span class="dt">table =</span> <span class="st">&quot;DASIM.DASIM1&quot;</span>)</span>
<span id="cb1-6"><a href="simstudy.html#cb1-6"></a>logindata &lt;-<span class="st"> </span>builder<span class="op">$</span><span class="kw">build</span>()</span></code></pre></div>
<p>And then we establish a connection to the server:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="simstudy.html#cb2-1"></a><span class="kw">library</span>(DSOpal)</span>
<span id="cb2-2"><a href="simstudy.html#cb2-2"></a><span class="cf">if</span>(<span class="kw">exists</span>(<span class="st">&quot;connections&quot;</span>)){</span>
<span id="cb2-3"><a href="simstudy.html#cb2-3"></a>  <span class="kw">datashield.logout</span>(<span class="dt">conns =</span> connections)</span>
<span id="cb2-4"><a href="simstudy.html#cb2-4"></a>}</span>
<span id="cb2-5"><a href="simstudy.html#cb2-5"></a>connections &lt;-<span class="st"> </span><span class="kw">datashield.login</span>(<span class="dt">logins=</span>logindata, <span class="dt">assign =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="preparing-to-generate-synthetic-data" class="section level2">
<h2><span class="header-section-number">6.3</span> Preparing to generate synthetic data</h2>
<p>This method builds on the fundamentals of the <strong>simstudy</strong> package. There is a good introduction to this package <a href="https://kgoldfeld.github.io/simstudy/index.html">here</a>.</p>
<p>First we load the library</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="simstudy.html#cb3-1"></a><span class="kw">library</span>(<span class="st">&quot;simstudy&quot;</span>)</span>
<span id="cb3-2"><a href="simstudy.html#cb3-2"></a><span class="kw">library</span>(<span class="st">&quot;dsBaseClient&quot;</span>)</span>
<span id="cb3-3"><a href="simstudy.html#cb3-3"></a><span class="kw">library</span>(<span class="st">&quot;dsSyntheticClient&quot;</span>)</span></code></pre></div>
<p>The <strong>simstudy</strong> method uses a function called <code>genCorFlex</code> (see <strong>simstudy</strong> help for more details). This function is currently not able to support categorical distributions, but does support binary distributions. Therefore we need to convert factor variables with more than 2 levels into a series of binary dummy variables. For example, the <code>PM_BMI_CATEGORICAL</code> variable has levels 1, 2 and 3. This will need to be converted into 2 binary variables with 2 levels. A helper function is provided to make this process easier.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="simstudy.html#cb4-1"></a><span class="kw">ds.binary.helper</span>(<span class="dt">dataframe =</span> <span class="st">&quot;D&quot;</span>, <span class="dt">factor_variables =</span> <span class="st">&quot;PM_BMI_CATEGORICAL&quot;</span>, <span class="dt">newobj =</span> <span class="st">&quot;my.bin&quot;</span>, <span class="dt">datasources =</span> connections)</span></code></pre></div>
<pre><code>## $server1
## $server1$return.message
## [1] &quot;Object(s) &#39;dummy,X1_PM_BMI_CATEGORICAL,X2_PM_BMI_CATEGORICAL,temp_mat&#39; was deleted.&quot;
## 
## $server1$deleted.objects
## [1] &quot;dummy,X1_PM_BMI_CATEGORICAL,X2_PM_BMI_CATEGORICAL,temp_mat&quot;
## 
## $server1$missing.objects
## [1] &quot;&quot;
## 
## $server1$problem.objects
## [1] &quot;&quot;</code></pre>
<p>Looking at the new dataframe, which has the 2 binary variables in it:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="simstudy.html#cb6-1"></a><span class="kw">ds.summary</span>(<span class="st">&quot;my.bin&quot;</span>, <span class="dt">datasources =</span> connections)</span></code></pre></div>
<pre><code>## $server1
## $server1$class
## [1] &quot;data.frame&quot;
## 
## $server1$`number of rows`
## [1] 10000
## 
## $server1$`number of columns`
## [1] 2
## 
## $server1$`variables held`
## [1] &quot;X1_PM_BMI_CATEGORICAL&quot; &quot;X2_PM_BMI_CATEGORICAL&quot;</code></pre>
<p>We will make a new dataframe without the original <code>PM_BMI_CATEGORICAL</code> variable but with the new binaries:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="simstudy.html#cb8-1"></a>vars =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;LAB_TSC&quot;</span>, <span class="st">&quot;LAB_TRIG&quot;</span>, <span class="st">&quot;LAB_HDL&quot;</span>, <span class="st">&quot;LAB_GLUC_FASTING&quot;</span>, <span class="st">&quot;PM_BMI_CONTINUOUS&quot;</span>, <span class="st">&quot;DIS_CVA&quot;</span>, <span class="st">&quot;DIS_DIAB&quot;</span>, <span class="st">&quot;DIS_AMI&quot;</span>, <span class="st">&quot;GENDER&quot;</span>)</span>
<span id="cb8-2"><a href="simstudy.html#cb8-2"></a><span class="kw">ds.subset</span>(<span class="dt">x=</span><span class="st">&quot;D&quot;</span>, <span class="dt">subset=</span><span class="st">&quot;D2&quot;</span>, <span class="dt">cols=</span>vars, <span class="dt">datasources =</span> connections)</span>
<span id="cb8-3"><a href="simstudy.html#cb8-3"></a><span class="kw">ds.dataFrame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;D2&quot;</span>,<span class="st">&quot;my.bin&quot;</span>), <span class="dt">newobj =</span> <span class="st">&quot;new_frame&quot;</span>, <span class="dt">datasources =</span> connections)</span></code></pre></div>
<pre><code>## $is.object.created
## [1] &quot;A data object &lt;new_frame&gt; has been created in all specified data sources&quot;
## 
## $validity.check
## [1] &quot;&lt;new_frame&gt; appears valid in all sources&quot;</code></pre>
</div>
<div id="generating-synthetic-data" class="section level2">
<h2><span class="header-section-number">6.4</span> Generating synthetic data</h2>
<p>Now we are ready to generate the synthetic data using the <code>ds.genCorFlex.helper</code> function. We need to provide a vector of continuous variables and factor variables:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="simstudy.html#cb10-1"></a>cont_vars =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;LAB_TSC&quot;</span>, <span class="st">&quot;LAB_TRIG&quot;</span>, <span class="st">&quot;LAB_HDL&quot;</span>, <span class="st">&quot;LAB_GLUC_FASTING&quot;</span>, <span class="st">&quot;PM_BMI_CONTINUOUS&quot;</span>)</span>
<span id="cb10-2"><a href="simstudy.html#cb10-2"></a>factor_vars =<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;DIS_CVA&quot;</span>, <span class="st">&quot;DIS_DIAB&quot;</span>, <span class="st">&quot;DIS_AMI&quot;</span>, <span class="st">&quot;GENDER&quot;</span>, <span class="st">&quot;X1_PM_BMI_CATEGORICAL&quot;</span>, <span class="st">&quot;X2_PM_BMI_CATEGORICAL&quot;</span>)</span>
<span id="cb10-3"><a href="simstudy.html#cb10-3"></a>dd =<span class="st"> </span><span class="kw">ds.genCorFlex.helper</span>(<span class="dt">dataframe =</span> <span class="st">&quot;new_frame&quot;</span>, <span class="dt">cont_variables =</span> cont_vars, <span class="dt">factor_variables =</span> factor_vars, <span class="dt">num_rows =</span> <span class="dv">10000</span>, <span class="dt">datasources =</span> connections)</span></code></pre></div>
<p>If all has gone well the synthetic data should have a similar structure and properties to the real data:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="simstudy.html#cb11-1"></a><span class="kw">head</span>(dd)</span></code></pre></div>
<pre><code>##    id DIS_CVA_num DIS_DIAB_num DIS_AMI_num GENDER_num X1_PM_BMI_CATEGORICAL_num
## 1:  1           0            0           0          0                         1
## 2:  2           0            0           0          0                         1
## 3:  3           0            0           0          1                         1
## 4:  4           0            0           0          0                         1
## 5:  5           0            0           0          1                         1
## 6:  6           0            0           0          1                         0
##    X2_PM_BMI_CATEGORICAL_num  LAB_TSC LAB_TRIG  LAB_HDL LAB_GLUC_FASTING
## 1:                         0 6.973402 4.240720 1.396935         5.765876
## 2:                         0 5.425906 4.008131 0.966976         5.416073
## 3:                         1 4.355270 1.052153 1.706088         5.317510
## 4:                         0 6.830871 3.725882 0.991530         6.017751
## 5:                         0 6.002892 2.170220 1.226995         4.127660
## 6:                         0 4.169135 1.214032 1.294669         5.338835
##    PM_BMI_CONTINUOUS
## 1:          28.81414
## 2:          29.89891
## 3:          32.84687
## 4:          30.48989
## 5:          26.04952
## 6:          32.57982</code></pre>
<p>We can reconstruct the <code>PM_BMI_CATEGORICAL</code> variable as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="simstudy.html#cb13-1"></a>dd<span class="op">$</span>PM_BMI_CATEGORICAL =<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>dd<span class="op">$</span>X1_PM_BMI_CATEGORICAL_num <span class="op">+</span><span class="st"> </span>dd<span class="op">$</span>X2_PM_BMI_CATEGORICAL_num</span></code></pre></div>
<p>Such that it now has levels 1, 2 and 3.</p>
</div>
<div id="brief-comments-on-the-validity-of-the-data-1" class="section level2">
<h2><span class="header-section-number">6.5</span> Brief comments on the validity of the data</h2>
<p>In the example above we chose to synthetically generate the variable <code>PM_BMI_CATEGORICAL</code>. This variable is actually derived from the continuous variable <code>PM_BMI_CONTINUOUS</code>, with (say) BMI &lt;25 being category 1, 25&lt;= BMI &lt; 30 being category 2 etc. Because of the probabilistic way in which the data are generated, this categorisation is not enforced in the data synthesis. It might be better to generate the continuous variable only and add the categorical variable afterwards.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="harmonisation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["synthetic_bookdown.pdf", "synthetic_bookdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
